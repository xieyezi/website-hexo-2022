<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html>
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  
  
  <title>  è®°ä¸€æ¬¡è‡ªå·±å°è£…NPMåŒ…çš„ç»å† |   å†™å¤œå­çš„ä¸ªäººåšå®¢ </title>

 
  
    <link rel="icon" href="/images/favicon.png">
  


  <link rel="stylesheet" href="/nayo.min.css"> 
</head>  
  <body>   
    
      <header class="header">
	
  <nav class="header-nav">        
   
    <span class="iconfont icon-menu mobile-toggle"></span>   	

    <div class="header-menu">          
              
            
              <a class="header-menu-link" id="header-menu-home" href="/">é¦–é¡µ</a>     
            
            
            
              <a class="header-menu-link" id="header-menu-archives" href="/archives">å½’æ¡£</a>     
            
            
            
              <a class="header-menu-link" id="header-menu-tags" href="/tags">æ ‡ç­¾</a>     
            
            
            
              <a class="header-menu-link" id="header-menu-about" href="/about">å…³äº</a>     
            
            
            
              <a class="iconfont icon-menu-search header-menu-link" id="header-menu-search"></a>
            
                
    </div>  
    
  </nav>
</header>   

      <div class="container">       
          
          
            <section class="main">  
          

          <article class="post">
  
	<div class="post-header">

	<p class="post-title">	
		è®°ä¸€æ¬¡è‡ªå·±å°è£…NPMåŒ…çš„ç»å†
	</p>
			

	<div class="meta-info">	
	<span>
		3æœˆ 28, 2019
	</span>

	
	
		<i class="iconfont icon-words"></i>
		<span>
			6136
		</span>
	
</div>

</div> 
	 

	  <div class="post-content slideDownMin">

		

			
					<h3 id="è¯´åœ¨å‰é¢"><a href="#è¯´åœ¨å‰é¢" class="headerlink" title="è¯´åœ¨å‰é¢"></a>è¯´åœ¨å‰é¢</h3><p>æœ€è¿‘ä¸€ç›´åœ¨å¿™è‡ªå·±çš„æ¯•ä¸šè®¾è®¡,åœ¨åšçš„è¿‡ç¨‹ä¸­,æœ‰çš„åœ°æ–¹è¦ç”¨åˆ°ç¼“å­˜.æˆ‘é‡‡ç”¨äº†localStorageå’ŒsessionStorageçš„æ–¹å¼è¿›è¡Œçš„ç¼“å­˜,å¹¶å®Œæ•´åœ°å®ç°äº†è‡ªå·±æƒ³è¦çš„åŠŸèƒ½.ä½†æ˜¯æˆ‘çªç„¶æƒ³åˆ°å‰ç«¯çš„â€æ¨¡å—åŒ–å¼€å‘â€,è¿™å—å®Œå…¨å¯ä»¥ç‹¬ç«‹å‡ºæ¥,å°†å…¶å°è£…ä¸ºä¸€ä¸ªç»Ÿä¸€çš„API,æƒ³è¦ä½¿ç”¨çš„æ—¶å€™å°±å¼•å…¥ä½¿ç”¨,äºæ˜¯æˆ‘å°†å…¶å°è£…ä¸ºäº†ä¸€ä¸ªå°†localStorageå’ŒsessionStorageç»Ÿä¸€åœ¨ä¸€èµ·çš„åŠŸèƒ½å‡½æ•°:<code>xieyezi-storage.js</code>.æˆ‘å­˜æ”¾åœ¨è‡ªå·±çš„ç”µè„‘é‡Œé¢,ä»¥ä¾¿æˆ‘è‡ªå·±ä»¥åä½¿ç”¨,ä½†æ˜¯æˆ‘çªç„¶æƒ³åˆ°äº†ç¨‹åºå‘˜çš„â€å¼€æºç²¾ç¥â€ğŸ˜¹,å¥½å§å…¶å®æ˜¯æƒ³åˆ°,æ¯æ¬¡æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªåŒ…çš„æ—¶å€™,æˆ‘ä»¬éƒ½æ˜¯é‡‡ç”¨<code>npm install xxx</code>çš„æ–¹å¼è¿›è¡Œå¼•å…¥,ç„¶ååœ¨ä½¿ç”¨çš„æ—¶å€™,å°±é€šè¿‡<code>import xxx from xxx</code> è¿™æ ·çš„æ–¹å¼è¿›è¡Œä½¿ç”¨.äºæ˜¯æˆ‘ä¹Ÿæƒ³è¦å°†æˆ‘çš„åŠŸèƒ½å‡½æ•°å°è£…ä¸ºä¸€ä¸ªnpmåŒ…,å¹¶ä¸”å‘å¸ƒåˆ°<a href="https://www.npmjs.com/" target="_blank" rel="noopener">npm</a>ğŸ‘†ä¸Šé¢å»,é‚£ä¹Ÿç®—æ˜¯ä¸ºæˆ‘ä»¬å¼€æºä½œå‡ºäº†ä¸€å®šçš„è´¡çŒ®.<a id="more"></a></p>
<h3 id="è¯´å¾—ç®€å•-åŠ¨æ‰‹å›°éš¾"><a href="#è¯´å¾—ç®€å•-åŠ¨æ‰‹å›°éš¾" class="headerlink" title="è¯´å¾—ç®€å•,åŠ¨æ‰‹å›°éš¾"></a>è¯´å¾—ç®€å•,åŠ¨æ‰‹å›°éš¾</h3><p>ä¸–ç•Œä¸Šå¾ˆå¤šäº‹æƒ…éƒ½æ˜¯è¯´èµ·æ¥å®¹æ˜“,åšèµ·æ¥æ¯”è¾ƒéš¾,å¹¶ä¸”,ä¸‡äº‹å¼€å¤´éš¾.æˆ‘å‘ç°æˆ‘è‡ªå·±ç¼ºä¹è¿™æ–¹é¢çš„å¾ˆå¤šçŸ¥è¯†,äºæ˜¯æˆ‘å¼€å§‹äº†è¾¹å­¦è¾¹å†™çš„æ¨¡å¼.<br>åœ¨å‰æœŸçš„è€ƒå¯Ÿä¸­,æˆ‘çœ‹äº†è®¸å¤šçš„npmåŒ…çš„æºç ,ä»–ä»¬éƒ½æœ‰å·®ä¸å¤šç±»ä¼¼çš„ç›®å½•ç»“æ„,äºæ˜¯æˆ‘ä¾è‘«èŠ¦ç”»ç“¢,æ„å»ºäº†å¦‚ä¸‹çš„ç›®å½•ç»“æ„:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line"> â”œâ”€â”€ ./dist</span><br><span class="line"> â””â”€â”€ ./src</span><br><span class="line">     â””â”€â”€ ./src/index.js</span><br></pre></td></tr></table></figure>
<p>æˆ‘æ‰§è¡Œäº†ä¸€ä¸‹npm çš„åˆå§‹åŒ–å·¥ç¨‹å‘½ä»¤ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<p>ç›®å½•å˜æˆäº†è¿™æ ·:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ ./dist</span><br><span class="line">â”œâ”€â”€ ./package.json</span><br><span class="line">â””â”€â”€ ./src</span><br><span class="line">    â””â”€â”€ ./src/index.js</span><br></pre></td></tr></table></figure>
<p>åŸæ¥åˆå§‹åŒ–åŒ…éƒ½ä¼šæœ‰ä¸€ä¸ªpackage.json,è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†è¿™ä¸ªåŒ…çš„å…¥å£åŠå…¶ä¿¡æ¯<br>åœ¨srcç›®å½•ä¸‹é¢å­˜æ”¾åŠŸèƒ½ä»£ç <code>index.js</code>,distç›®å½•ä¸‹é¢åˆ™å­˜æ”¾æ‰“åŒ…åçš„æ–‡ä»¶<code>xieyezi-storage.js</code><br>ä¸€åˆ‡éƒ½å·²ç»å‡†å¤‡å°±ç»ª,æˆ‘å¼€å§‹å¯»æ‰¾ä¸€ä¸ªæ‰“åŒ…å·¥å…·.</p>
<h3 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h3><p>åœ¨ä¼—å¤šçš„æ‰“åŒ…å·¥å…·ä¸­,æˆ‘ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„æ‰“åŒ…å·¥å…·å°±æ˜¯webpack,äºæ˜¯å…ˆå®‰è£…(åœ¨æ ¹ç›®å½•):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i webpack webpack-cli --save-dev</span><br></pre></td></tr></table></figure>
<p>ç„¶åé ç€è‡ªå·±å¯¹webpackçš„æµ…è–„çŸ¥è¯†,å«æ³ªå†™ä¸‹äº†é…ç½®æ–‡ä»¶(webpack.config.js):</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">output: &#123;</span><br><span class="line">    filename: <span class="string">'xieyezi-storage.js'</span>,</span><br><span class="line">    publicPath: <span class="string">'/dist/'</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>äºæ˜¯æ‰“åŒ…ä¹‹å,ç”Ÿæˆäº†<code>xieyezi-storage.js</code>çš„æ–‡ä»¶,äºæ˜¯æˆ‘å°†æ­¤æ–‡ä»¶å¤åˆ¶åˆ°æˆ‘çš„é¡¹ç›®ç›®å½•é‡Œé¢è¿›è¡Œå¼•å…¥ä½¿ç”¨:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> storage <span class="keyword">from</span> <span class="string">'common/js/xieyezi-storage'</span></span><br></pre></td></tr></table></figure></p>
<p>ç»“æœæ˜¯æˆ‘æˆåŠŸåœ°å¼•å…¥äº†æ–‡ä»¶å¹¶è¿›è¡Œäº†ä½¿ç”¨.ä½†æ˜¯æˆ‘è¿™æ˜¯ES6è§„èŒƒ,å¹¶ä¸èƒ½æ”¯æŒcommonJSæ¨¡å¼,è¯´åˆ°è¿™ä¸ª,æœ‰å¦‚ä¸‹æ ‡å‡†:</p>
<ul>
<li>amd â€“ å¼‚æ­¥æ¨¡å—å®šä¹‰,ç”¨äºåƒRequireJSè¿™æ ·çš„æ¨¡å—åŠ è½½å™¨</li>
<li>cjs â€“ CommonJS,é€‚ç”¨äº Node å’Œ Browserify/Webpack ä¾‹å¦‚<code>require(&#39;xieyezi-storage&#39;)</code></li>
<li>es â€“ å°†è½¯ä»¶åŒ…ä¿å­˜ä¸ºESæ¨¡å—æ–‡ä»¶ ä¾‹å¦‚ <code>import storage from &#39;xieyezi-storage&#39;</code>.</li>
<li>iife â€“ ä¸€ä¸ªè‡ªåŠ¨æ‰§è¡Œçš„åŠŸèƒ½,é€‚åˆä½œä¸º<code>&lt;script&gt;</code>æ ‡ç­¾.ï¼ˆå¦‚æœè¦ä¸ºåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªæ†ç»‘åŒ…,æ‚¨å¯èƒ½æƒ³è¦ä½¿ç”¨å®ƒ,å› ä¸ºå®ƒä¼šä½¿æ–‡ä»¶å¤§å°å˜å°.ï¼‰</li>
<li>umd â€“ é€šç”¨æ¨¡å—å®šä¹‰,ä»¥amd,cjs å’Œ iife ä¸ºä¸€ä½“,umdæ˜¯amdå’ŒCommonJSçš„ç³…åˆ,umdå…ˆåˆ¤æ–­æ˜¯å¦æ”¯æŒNode.jsçš„æ¨¡å—ï¼ˆexportsï¼‰æ˜¯å¦å­˜åœ¨,å­˜åœ¨åˆ™ä½¿ç”¨Node.jsæ¨¡å—æ¨¡å¼.</li>
</ul>
<p>æ‰€ä»¥æˆ‘æ‰“åŒ…çš„æ–‡ä»¶æ— æ³•é€šè¿‡commonJSæ–¹å¼æ¥å¼•å…¥.</p>
<h3 id="libraryTarget"><a href="#libraryTarget" class="headerlink" title="libraryTarget"></a>libraryTarget</h3><p>libraryTargetå°±æ˜¯é—®é¢˜çš„å…³é”®,é€šè¿‡è®¾ç½®è¯¥å±æ€§,è¿™æ˜¯å¯ä»¥æ§åˆ¶ library å¦‚ä½•ä»¥ä¸åŒæ–¹å¼æš´éœ²çš„é€‰é¡¹.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">output: &#123;</span><br><span class="line">    filename: <span class="string">'xieyezi-storage.js'</span>,</span><br><span class="line">    publicPath: <span class="string">'/dist/'</span>,</span><br><span class="line">    libraryTarget: <span class="string">'umd'</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·å­,æˆ‘ä»¬æ‰“åŒ…çš„æ–‡ä»¶å°±ä¼šæ”¯æŒå„ç§è§„èŒƒäº†.è¿™æ ·å­æˆ‘ä»¥ä¸ºå°±ç®—å®Œäº†,ä½†æ˜¯äº‹å®å¹¶éå¦‚æ­¤.æˆ‘çœ‹äº†ä¸€ä¸‹,æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶å¤§å°å±…ç„¶æœ‰2k.è¿™ä¹ˆå¤§ï¼Ÿï¼Ÿ</p>
<h3 id="rollup"><a href="#rollup" class="headerlink" title="rollup"></a>rollup</h3><p>åœ¨å‰é¢çš„è€ƒå¯Ÿä¸­,æˆ‘åœ¨é€‰æ‹©æ‰“åŒ…å·¥å…·çš„æ—¶å€™,æˆ‘çœ‹è§äº†Vueæ¡†æ¶å’ŒReactç”¨çš„æ˜¯ä»€ä¹ˆæ‰“åŒ…å·¥å…·,ç»“æœæˆ‘å‘ç°,å±…ç„¶ä»–ä»¬ä¸¤éƒ½ä¸æ˜¯ç”¨çš„webpack,è€Œæ˜¯ç”¨çš„æ˜¯ä¸€ä¸ªå«åš <code>rollup</code> çš„ä¸œè¥¿.äºæ˜¯æˆ‘å»æŸ¥é˜…äº†rollupçš„å®˜ç½‘:</p>
<blockquote>
<p>Rollup æ˜¯ä¸€ä¸ª JavaScript æ¨¡å—æ‰“åŒ…å™¨,å¯ä»¥å°†å°å—ä»£ç ç¼–è¯‘æˆå¤§å—å¤æ‚çš„ä»£ç ,ä¾‹å¦‚ library æˆ–åº”ç”¨ç¨‹åº.Rollup å¯¹ä»£ç æ¨¡å—ä½¿ç”¨æ–°çš„æ ‡å‡†åŒ–æ ¼å¼,è¿™äº›æ ‡å‡†éƒ½åŒ…å«åœ¨ JavaScript çš„ ES6 ç‰ˆæœ¬ä¸­,è€Œä¸æ˜¯ä»¥å‰çš„ç‰¹æ®Šè§£å†³æ–¹æ¡ˆ,å¦‚ CommonJS å’Œ AMD.ES6 æ¨¡å—å¯ä»¥ä½¿ä½ è‡ªç”±ã€æ— ç¼åœ°ä½¿ç”¨ä½ æœ€å–œçˆ±çš„ library ä¸­é‚£äº›æœ€æœ‰ç”¨ç‹¬ç«‹å‡½æ•°,è€Œä½ çš„é¡¹ç›®ä¸å¿…æºå¸¦å…¶ä»–æœªä½¿ç”¨çš„ä»£ç .</p>
</blockquote>
<p>æ‰€ä»¥è¯´,rollupå°±æ˜¯ä¸“é—¨ç”¨æ¥æ‰“åŒ…libraryçš„,è€Œwebpackå¤§å¤šæ˜¯ç”¨æ¥æ‰“åŒ…åº”ç”¨ç¨‹åºçš„.</p>
<p>äºæ˜¯æˆ‘æ„‰å¿«çš„å¼€å§‹äº†rollupçš„å­¦ä¹ ä½¿ç”¨:<br>å…ˆå®‰è£…:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --global rollup</span><br></pre></td></tr></table></figure>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªrollup.config.js:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    input: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        file: <span class="string">'./dist/xieyezi-storage.js'</span>,</span><br><span class="line">        format: <span class="string">'umd'</span>,</span><br><span class="line">        name:<span class="string">'xieyezi-storage'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±æ˜¯æ‰§è¡Œ <code>rollup c</code> ,æˆåŠŸæ‰“åŒ….è€Œä¸”ç»è¿‡æˆ‘çš„æµ‹è¯•,èƒ½æ­£å¸¸å¼•å…¥ä½¿ç”¨.æˆ‘ä¸€çœ‹,æ‰1kğŸ˜‚,å¼€å¿ƒçš„ç¬‘äº†.<br>ç„¶åæˆ‘å°±æ‰“ç®—ç”¨æˆ‘ä»¬çš„<code>uglify</code>è¿›è¡Œä»£ç å‹ç¼©:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i rollup-plugin-uglify -D</span><br></pre></td></tr></table></figure></p>
<p>åœ¨rollup.config.jsé…ç½®å¼•å…¥:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; uglify &#125; <span class="keyword">from</span> <span class="string">'rollup-plugin-uglify'</span>;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    input: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        file: <span class="string">'./dist/xieyezi-storage.js'</span>,</span><br><span class="line">        format: <span class="string">'umd'</span>,</span><br><span class="line">        name:<span class="string">'xieyezi-storage'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        uglify()</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åé‡æ–°è¿è¡Œ <code>rollup c</code> è¿›è¡Œæ‰“åŒ…,ç»“æœç›´æ¥æŠ¥é”™</p>
<p><img src="https://i.loli.net/2019/03/28/5c9c69facbebb.jpg" alt="IMG_0665.JPG"></p>
<p>æˆ‘ä¸Šå»å°±æ˜¯ä¸€é¡¿è°·æ­ŒåŠ ç™¾åº¦,åŸæ¥uglifyæ’ä»¶åªæ”¯æŒes5çš„å‹ç¼©.çœ‹æ¥æˆ‘åªèƒ½å¦å¯»å‡ºè·¯.æˆ‘çœ‹è§äº† <code>terser</code> è¿™ä¸ªæ’ä»¶,è¿™ä¸ªæ’ä»¶ä¹Ÿèƒ½å¯¹ä»£ç è¿›è¡Œå‹ç¼©,æ”¯æŒes6.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i rollup-plugin-terser -D</span><br></pre></td></tr></table></figure></p>
<p>åœ¨rollup.config.jsé…ç½®å¼•å…¥:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; terser &#125; <span class="keyword">from</span> <span class="string">'rollup-plugin-terser'</span>;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    input: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        file: <span class="string">'./dist/xieyezi-storage.js'</span>,</span><br><span class="line">        format: <span class="string">'umd'</span>,</span><br><span class="line">        name:<span class="string">'xieyezi-storage'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        terser()</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>å†æ¬¡è¿›è¡Œæ‰“åŒ…,æˆåŠŸæ‰“åŒ…ï¼ï¼ï¼å¯æ˜¯æˆ‘ä»¬æ‰“åŒ…ä¹‹åå¯¹ä»£ç åªæ”¯æŒes6,æˆ‘ä»¬è¿˜éœ€è¦ç”¨ <code>babel</code> è¿›è¡Œè½¬ä¹‰:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//package.json</span></span><br><span class="line"><span class="string">"devDependencies"</span>: &#123;</span><br><span class="line"><span class="string">"babel-core"</span>: <span class="string">"^6.9.1"</span>,</span><br><span class="line"><span class="string">"babel-loader"</span>: <span class="string">"^6.2.4"</span>,</span><br><span class="line"><span class="string">"babel-plugin-add-module-exports"</span>: <span class="string">"^0.2.1"</span>,</span><br><span class="line"><span class="string">"babel-plugin-transform-es2015-modules-umd"</span>: <span class="string">"^6.12.0"</span>,</span><br><span class="line"><span class="string">"babel-plugin-transform-object-assign"</span>: <span class="string">"^6.22.0"</span>,</span><br><span class="line"><span class="string">"babel-plugin-transform-runtime"</span>: <span class="string">"^6.9.0"</span>,</span><br><span class="line"><span class="string">"babel-polyfill"</span>: <span class="string">"^6.22.0"</span>,</span><br><span class="line"><span class="string">"babel-preset-env"</span>: <span class="string">"^1.5.1"</span>,</span><br><span class="line"><span class="string">"babel-preset-es2015"</span>: <span class="string">"^6.9.0"</span>,</span><br><span class="line"><span class="string">"babel-preset-stage-2"</span>: <span class="string">"^6.5.0"</span>,</span><br><span class="line"><span class="string">"rollup-plugin-babel"</span>: <span class="string">"^3.0.7"</span>,</span><br><span class="line"><span class="string">"rollup-plugin-terser"</span>: <span class="string">"^4.0.4"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å†è¿›è¡Œ<code>npm install</code><br>è¿™é‡Œè¦æ³¨æ„,è¦ä½¿ç”¨babel,åœ¨rollupé‡Œé¢,å¿…é¡»å®‰è£…å®Œå®ƒæ‰€éœ€å¯¹ä¾èµ–,ä¸èƒ½åªå®‰è£… <code>rollup-plugin-babel</code>.å¿…é¡»å®‰è£…å®Œæ‰€æœ‰babelæ‰€éœ€ä¾èµ–.</p>
<p>å®Œæ•´çš„rollup.config.js:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; terser &#125; <span class="keyword">from</span> <span class="string">'rollup-plugin-terser'</span>;</span><br><span class="line"><span class="keyword">import</span> babel <span class="keyword">from</span> <span class="string">'rollup-plugin-babel'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    input: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        file: <span class="string">'./dist/xieyezi-storage.js'</span>,</span><br><span class="line">        format: <span class="string">'umd'</span>,</span><br><span class="line">        name:<span class="string">'xieyezi-storage'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        babel(&#123;</span><br><span class="line">            exclude: <span class="string">'node_modules/**'</span></span><br><span class="line">        &#125;),</span><br><span class="line">        terser()</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º.babelrc:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;: [</span><br><span class="line">        [</span><br><span class="line">            &quot;env&quot;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;modules&quot;: false</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    ],</span><br><span class="line">    &quot;plugins&quot;: [</span><br><span class="line">        &quot;transform-object-assign&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æ‰§è¡Œæ‰“åŒ…,æ‰“åŒ…æˆåŠŸ<br>å®Œæ•´çš„package.json:<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"name"</span>: <span class="string">"xieyezi-storage"</span>,</span><br><span class="line"><span class="attr">"version"</span>: <span class="string">"1.0.4"</span>,</span><br><span class="line"><span class="attr">"description"</span>: <span class="string">"a package that encapsulates localStorage and sessionStorage"</span>,</span><br><span class="line"><span class="attr">"main"</span>: <span class="string">"dist/xieyezi-storage.js"</span>,</span><br><span class="line"><span class="attr">"module"</span>: <span class="string">"dist/xieyezi-storage.esm.js"</span>,</span><br><span class="line"><span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">"keywords"</span>: [</span><br><span class="line">    <span class="string">"web"</span>,</span><br><span class="line">    <span class="string">"localStorage"</span>,</span><br><span class="line">    <span class="string">"sessionStorage"</span></span><br><span class="line">],</span><br><span class="line"><span class="attr">"author"</span>: <span class="string">"xieyezi"</span>,</span><br><span class="line"><span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line"><span class="attr">"git"</span>:&#123;</span><br><span class="line">    <span class="attr">"url"</span>:<span class="string">"https://github.com/xieyezi/webStorage"</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"babel-core"</span>: <span class="string">"^6.9.1"</span>,</span><br><span class="line">    <span class="attr">"babel-loader"</span>: <span class="string">"^6.2.4"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-add-module-exports"</span>: <span class="string">"^0.2.1"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-modules-umd"</span>: <span class="string">"^6.12.0"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-object-assign"</span>: <span class="string">"^6.22.0"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-runtime"</span>: <span class="string">"^6.9.0"</span>,</span><br><span class="line">    <span class="attr">"babel-polyfill"</span>: <span class="string">"^6.22.0"</span>,</span><br><span class="line">    <span class="attr">"babel-preset-env"</span>: <span class="string">"^1.5.1"</span>,</span><br><span class="line">    <span class="attr">"babel-preset-es2015"</span>: <span class="string">"^6.9.0"</span>,</span><br><span class="line">    <span class="attr">"babel-preset-stage-2"</span>: <span class="string">"^6.5.0"</span>,</span><br><span class="line">    <span class="attr">"rollup-plugin-babel"</span>: <span class="string">"^3.0.7"</span>,</span><br><span class="line">    <span class="attr">"rollup-plugin-terser"</span>: <span class="string">"^4.0.4"</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æœ€åçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ ./README.md</span><br><span class="line">â”œâ”€â”€ ./dist</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ ./dist/xieyezi-storage.esm.js</span><br><span class="line">â”‚Â Â  â””â”€â”€ ./dist/xieyezi-storage.js</span><br><span class="line">â”œâ”€â”€ ./package-lock.json</span><br><span class="line">â”œâ”€â”€ ./package.json</span><br><span class="line">â”œâ”€â”€ ./rollup.config.js</span><br><span class="line">â”œâ”€â”€ ./babelrc</span><br><span class="line">â””â”€â”€ ./src</span><br><span class="line">    â””â”€â”€ ./src/index.js</span><br></pre></td></tr></table></figure></p>
<p>æˆ‘æŒ‰ç…§ <code>es</code> å’Œ <code>umd</code> æ‰“åŒ…äº†ä¸¤æ¬¡.</p>
<h3 id="å°†åŒ…ä¸Šä¼ è‡³npm"><a href="#å°†åŒ…ä¸Šä¼ è‡³npm" class="headerlink" title="å°†åŒ…ä¸Šä¼ è‡³npm"></a>å°†åŒ…ä¸Šä¼ è‡³npm</h3><p>å…ˆå»npmæ³¨å†Œä¸€ä¸ªè´¦å·,ç„¶åè¿›å…¥åˆ°æ ¹ç›®å½•è¿›è¡Œç™»å½•:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ npm login</span><br><span class="line">Username: xieyezi</span><br><span class="line">Password: </span><br><span class="line">Email: (this IS public) 1435398529@qq.com</span><br><span class="line">Logged in as xieyezi on https://registry.npmjs.org/.</span><br></pre></td></tr></table></figure></p>
<p>æ³¨:è¾“å…¥å¯†ç çš„æ—¶å€™ä¸ä¼šæ˜¾ç¤º,åªè¦æœ€åæ˜¾ç¤ºLogged in as your nickNameå³å¯.<br>ç„¶åè¾“å…¥:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure></p>
<p>å®ƒä¼šæç¤ºä½ æˆåŠŸå‘å¸ƒ,å¹¶ä¼šç»™ä½ å‘é‚®ä»¶.<br>è¿›å…¥åˆ°npmå®˜ç½‘è¿›è¡Œæœç´¢æˆ‘ä»¬å‘å¸ƒçš„åŒ…,å¦‚æœæˆåŠŸæœç´¢åˆ°,åˆ™å‘å¸ƒæˆåŠŸ:<br><img src="https://i.loli.net/2019/03/28/5c9c7d748441f.png" alt="QQ20190328-155257@2x.png"></p>
<p>å¥½äº†,æ¥ä¸‹æ¥,è¿›å…¥åˆ°æˆ‘è‡ªå·±çš„æ¯•ä¸šè®¾è®¡çš„æ ¹ç›®å½•:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install xieyzi-storage</span><br></pre></td></tr></table></figure></p>
<p>åœ¨node_moudulesé‡Œé¢æŸ¥æ‰¾ <code>xieyezi-storage</code> :<br><img src="https://i.loli.net/2019/03/28/5c9c7e592c74c.png" alt="QQ20190328-155537@2x.png"><br>æˆåŠŸæ‰¾åˆ°,å¼•å…¥é¡¹ç›®,æˆåŠŸåœ°è¿›è¡Œäº†å¼•å…¥âœŒï¸</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å®Œæˆä¸Šé¢çš„è¿™äº›å·¥ä½œ,æˆ‘èŠ±äº†å‰å‰ååå·®ä¸å¤š5å¤©çš„æ—¶é—´,å‰æœŸä¸»è¦æ˜¯åœ¨å­¦ä¹ ,åé¢æ‰å¼€å§‹åŠ¨æ‰‹åš.åšçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤š <code>error</code> å’Œ <code>bug</code> ,ä½†æ˜¯éƒ½æ˜¯æ…¢æ…¢çš„è§£å†³äº†å›°éš¾.æˆ‘è§‰å¾—æœ€å¤§çš„æ”¶è·å°±æ˜¯:å¾ˆå¤šæ—¶å€™,ä¸æ˜¯æˆ‘ä»¬ä¸ä¼š,åªæ˜¯æˆ‘ä»¬ä¸æ„¿æ„ä¸»åŠ¨å»åšè€Œå·².æ‰€ä»¥æœ‹å‹å§,é‡åˆ°è‡ªå·±ä¸ä¼šçš„ä¸œè¥¿,æ’¸èµ·è¢–å­å°±æ˜¯å¹²å§ï¼ï¼</p>
  	
					
	  </div>     
	  

	
<div class="post-meta">
      	

      
        <i class="iconfont icon-tag"></i>     
          <a class="tag-link" href="/tags/localStorage/">localStorage</a> <a class="tag-link" href="/tags/npm/">npm</a> <a class="tag-link" href="/tags/rollup/">rollup</a> <a class="tag-link" href="/tags/sessionStorage/">sessionStorage</a> <a class="tag-link" href="/tags/webpack/">webpack</a>    
      	
</div>





<div class="post-footer">
  <div class="pf-left">
      <img class="pf-avatar" src="http://wx2.sinaimg.cn/mw690/89296167gy1fu5ph67x17j21kw1kwhdu.jpg">
      <p class="pf-des">hi,æˆ‘æ˜¯å†™å¤œå­,å¸Œæœ›ä½ æœ‰æ„‰å¿«çš„ä¸€å¤©.</p>
  </div>

  <div class="pf-right">           
      <div class="pf-links">
        




<span class="donate-btn">
	<span class="iconfont icon-donate"></span>
</span>


<div id="donate-box" class="sildeUpMin">

	<span class="donate-cancel iconfont icon-cancel"></span>

	<div class="donate-img-box">
		<img id="donate-qr-wechat" class="noLazyLoad donate-img" src="/images/donate1.png" alt="No Donate Image!">	
		<img id="donate-qr-alipay" class="noLazyLoad donate-img lazyload" src="/images/placeholder.png" alt="No Donate Image!" data-src="/images/donate2.png">	
	</div>

	<span class="donate-word">ä¸–ç•Œç¾å¥½ ä½ ä¹Ÿæ˜¯</span>

	<div class="donate-list">
		<span class="iconfont icon-donate-wechat"></span>
		<span class="iconfont icon-donate-alipay"></span>
	</div>

</div>

 
        
	
<script id="-mob-share" src="http://f1.webshare.mob.com/code/mob-share.js?appkey=21d601593a1de"></script>
	
	<span class="share-btn">
	<span class="iconfont icon-share"></span>
	</span>


	<div class="-mob-share sildeUpMin">
		   			             
            <a class="iconfont  icon-share-qq -mob-share-qq"></a>		
     	   			             
            <a class="iconfont  icon-share-weixin -mob-share-weixin"></a>		
     	   			             
            <a class="iconfont  icon-share-weibo -mob-share-weibo"></a>		
     	   			             
            <a class="iconfont  icon-share-douban -mob-share-douban"></a>		
     	   			             
            <a class="iconfont  icon-share-facebook -mob-share-facebook"></a>		
     	   			             
            <a class="iconfont  icon-share-twitter -mob-share-twitter"></a>		
     	   			             
            <a class="iconfont  icon-share-google -mob-share-google"></a>		
     	   
	</div>	

      </div>  
    <nav class="pf-paginator">
      
         
          <a href="/2019/04/20/Vueå¤šä¸ªç»„ä»¶æ˜ å°„åˆ°åŒä¸€ä¸ªç»„ä»¶,é¡µé¢ä¸åˆ·æ–°ï¼Ÿ/" data-hover="Vueå¤šä¸ªç»„ä»¶æ˜ å°„åˆ°åŒä¸€ä¸ªç»„ä»¶,é¡µé¢ä¸åˆ·æ–°ï¼Ÿ">ä¸Šä¸€ç¯‡</a>      
            
        
      
        
        <a href="/2019/03/26/å°†æœ¬åœ°é¡¹ç›®åŒæ­¥è‡³github/" data-hover="å°†æœ¬åœ°é¡¹ç›®åŒæ­¥è‡³github"> ä¸‹ä¸€ç¯‡</a>
            
  </nav>   
  </div>
</div> 
	


    <div id="comment">   
    </div>

    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>

    <script src="//unpkg.com/valine@v1.1.8-beta/dist/Valine.min.js"></script>

    <script>
        new Valine({
        el: '#comment',
        notify:false, 
        verify:false, 
        app_id: 'cFM0eCo0CQ9xmBXmHi1eltol-gzGzoHsz',
        app_key: 'oh9tizsnvV2vNvWgqEvoNtQO',  
        path:window.location.pathname, 
        avatar:'mm' ,
        guest_info:['nick','mail']
        });
    </script>
	
</article>

          </section> 
      </div>            
    
    <a id="backTop">
      <span>
        <i class="iconfont icon-backtotop"></i>
      </span>
    </a> 

  
    
    <div class="search-container sildeUpMin">
        <div class="search-header">
            <input type="text" placeholder="è¾“å…¥ä½ æƒ³æœç´¢çš„" id="search-input" class="search-input">  
            <span class="search-cancel iconfont icon-cancel"></span>
        </div>
        <div id="search-result" class="search-result"></div>
    </div>
 
     <div class="mobile-menu">      

      
      <img class="mobile-menu-icon lazyload" src="/images/placeholder.png" data-src="/images/favicon.png">   
      

         
            

            <a class="mobile-menu-link" href="/">é¦–é¡µ
            </a>
            
         
            

            <a class="mobile-menu-link" href="/archives">å½’æ¡£
            </a>
            
         
            

            <a class="mobile-menu-link" href="/tags">æ ‡ç­¾
            </a>
            
         
            

            <a class="mobile-menu-link" href="/about">å…³äº
            </a>
            
         
                          

            <a class="mobile-menu-link mobile-menu-search" href="#">æœç´¢ </a>                 
            
         
      
</div>        
    


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?636802045446222199ae541e32c8133e"; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>





     
    




<footer id="footer">


		<div class="footer-copyright">
		&copy;
		
		2018-
		
		2019

		Xieyezi
		<br>

		Copyright
		<a href="http://www.xieyezi.com/" target="_blank">Xieyezi</a>
		</div>

</footer>
   

  

    <script src="/nayo.bundle.js"></script>           
  </body>        
</html>